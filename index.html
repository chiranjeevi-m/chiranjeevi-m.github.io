<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BSNL Walkathon Registration</title>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<style>
body { font-family: Arial; background:#f2f5f7; margin:0; padding:0; }
.container { max-width:500px; margin:30px auto; background:#fff; padding:25px; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1);}
.header-img { display:block; margin:0 auto 20px; max-width:250px; border-radius:10px; }
h2 { text-align:center; color:#0052a5; margin-bottom:20px;}
input, select { width:100%; padding:12px; margin:8px 0; border-radius:6px; border:1px solid #ccc; font-size:14px; }
input:focus, select:focus { border-color:#0052a5; outline:none; box-shadow:0 0 5px rgba(0,82,165,0.3);}
button { width:100%; padding:14px; background-color:#0052a5; color:white; border:none; border-radius:8px; font-size:16px; cursor:pointer; margin-top:10px;}
button:hover { background-color:#003d7a; }
.payment-info { background:#e6f0ff; padding:15px; border-radius:8px; margin:15px 0; text-align:center; color:#0052a5; font-weight:bold;}
.payment-info img { margin-top:10px; max-width:200px;}
</style>
</head>
<body>
<div class="container">
<img class="header-img" src="https://i.postimg.cc/6pKpVnPy/bsnl-logo.jpg" alt="BSNL Walkathon">
<h2>BSNL Walkathon Registration</h2>

<form id="regForm">
<input type="text" name="name" placeholder="Full Name" required>
<input type="number" name="age" placeholder="Age" required>
<select name="tshirt" required>
<option value="">Select T-Shirt Size</option>
<option value="S">S</option>
<option value="M">M</option>
<option value="L">L</option>
<option value="XL">XL</option>
<option value="XXL">XXL</option>
</select>
<input type="email" name="email" placeholder="Email" required>
<input type="text" name="mobile" placeholder="Mobile Number" required>
<input type="text" name="paymentId" placeholder="Payment Transaction ID" required>

<div class="payment-info">
Amount: â‚¹250 per participant<br>
Transfer to: <strong>enter your transaction id </strong><br>
<img src="https://imagefa.st/images/2025/10/04/QR_B.jpeg" alt="QR Code">
</div>

<button type="submit">Register</button>
</form>
</div>

<script>
const webAppURL = "https://script.google.com/macros/s/AKfycbyQ1Z0Pc0NsScsorAQjUOgF0hPL6Uoo1LcrY6V-DxTPHmep3-inM5cSg2906m9Dgkd1/exec";

document.getElementById('regForm').addEventListener('submit', function(e) {
  e.preventDefault();
  const formData = {
    name: this.name.value.trim(),
    age: this.age.value.trim(),
    tshirt: this.tshirt.value,
    email: this.email.value.trim().toLowerCase(),
    mobile: this.mobile.value.trim(),
    paymentId: this.paymentId.value.trim()
  };

  fetch(webAppURL, {
    method:'POST',
    headers:{ 'Content-Type':'application/json' },
    body: JSON.stringify(formData)
  })
  .then(res => res.json())
  .then(res => {
    if(res.status === 'duplicate'){
      Swal.fire({icon:'warning', title:'Already Registered',
        html: res.message + '<br><b>Registration ID:</b> ' + res.registrationId + '<br><b>Token:</b> ' + res.token});
    } else if(res.status === 'success'){
      Swal.fire({icon:'success', title:'Registration Successful!',
        html:'<b>Registration ID:</b> ' + res.registrationId + '<br><b>Token:</b> ' + res.token});
      this.reset();
    } else {
      Swal.fire({icon:'error', title:'Error', text:'Something went wrong'});
    }
  })
  .catch(err => Swal.fire({icon:'error', title:'Error', text:err.message}));
});
</script>
</body>
</html>

